# Отчёт

- Исполнитель: Гусляков Алексей Викторович
- Вариант: 23

## Условие
N болтунов имеют телефоны. Они случайное время ждут звонков, либо звонят друг другу, чтобы побеседовать. Если телефон случайного абонента занят, болтун будет звонить другому случайному абоненту. Побеседовав некоторое время, болтун или ждёт, или звонит на другой случайный номер. Требуется смоделировать поведение болтунов.

## Сценарий отображения сущностей
- **Болтун** — отдельный процесс, который переходит между состояниями ожидания и разговора.
- **Телефон/занятость** — общий массив флагов в разделяемой памяти.
- **Звонок** — попытка установить занятие для двух абонентов; если абонент занят, выбирается новый номер.
- **Наблюдатель** — отдельный процесс (или несколько процессов), считывающий события из очереди сообщений (программа 3) или из кольцевого буфера (программа 4).
- **Завершение** — по истечении времени моделирования или по сигналу `SIGINT`, после чего процессы освобождают семафоры и разделяемую память.

## Программа 1
- Единый родитель создаёт нужное число дочерних процессов.
- Используются неименованные семафоры в разделяемой памяти POSIX.
- Все процессы пишут журнал в общий stdout с синхронизацией.
- Завершение по таймауту или `Ctrl+C`; ресурсы очищаются родителем.
- Запуск: `./program1 <N> <таймаут>` из каталога `program1`.

## Программа 2
- Независимые процессы, запускаемые в разных консолях.
- Используются именованные семафоры и разделяемая память POSIX.
- Первый запуск с `--init <N>` создаёт память и устанавливает число болтунов. Флаг `--cleanup` удаляет семафоры и сегмент.
- Каждый процесс регистрируется сам, получает уникальный идентификатор и ведёт журнал в собственной консоли.

## Программа 3
- Добавлен наблюдатель `observer3`, читающий сообщения из именованной очереди POSIX (`/talker3_queue`).
- Болтуны из программы 2 дополнительно отправляют каждое событие в очередь.
- Сообщение `STOP` или сигнал `SIGINT` закрывает наблюдатель.

## Программа 4
- Доработана версия 3: события складываются в кольцевой буфер в разделяемой памяти.
- Несколько наблюдателей `observer4` могут подключаться одновременно и читать полный поток независимо, используя разделяемый буфер и семафоры.

## Завершение и очистка
Во всех программах предусмотрена обработка `SIGINT`, установка флага остановки и корректное освобождение семафоров и разделяемой памяти (или очереди сообщений). Дополнительно предусмотрены флаги `--cleanup` (программы 2–4) для явного удаления ресурсов.

## Результаты работы
При запуске нескольких экземпляров вывод показывает последовательность звонков, занятость абонентов и завершение процессов. Наблюдатели программ 3 и 4 получают и отображают одинаковую информацию.
